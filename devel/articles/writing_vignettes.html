<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="admiraldev">
<title>Writing Vignettes • admiraldev</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Writing Vignettes">
<meta property="og:description" content="admiraldev">
<meta property="og:image" content="https://pharmaverse.github.io/admiraldev/devel/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">admiraldev</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/admiraldev.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-developer-guides">Developer Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-developer-guides">
    <a class="dropdown-item" href="../articles/development_process.html">Development Process</a>
    <a class="dropdown-item" href="../articles/programming_strategy.html">Programming Strategy</a>
    <a class="dropdown-item" href="../articles/writing_vignettes.html">Writing Vignettes</a>
    <a class="dropdown-item" href="../articles/unit_test_guidance.html">Unit Test Guidance</a>
    <a class="dropdown-item" href="../articles/git_usage.html">Guidance for git and GitHub Usage</a>
    <a class="dropdown-item" href="../articles/pr_review_guidance.html">Pull Request Review Guidance</a>
    <a class="dropdown-item" href="../articles/release_strategy.html">Release Strategy</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiraldev" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="writing_vignettes_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Writing Vignettes</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiraldev/blob/main/vignettes/writing_vignettes.Rmd" class="external-link"><code>vignettes/writing_vignettes.Rmd</code></a></small>
      <div class="d-none name"><code>writing_vignettes.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This guidance ensures consistency across the vignettes in the <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> package in terms of content, structure and code execution. As a general rule, the vignette workflow defined in <a href="https://r-pkgs.org/vignettes.html" class="external-link">r-pkgs.org</a> is followed.</p>
</div>
<div class="section level2">
<h2 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h2>
<p>Each vignette in <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> should start with the following metadata.</p>
<pre><code>---
title: "&lt;Title&gt;"
output:  rmarkdown::html_vignette:
vignette: &gt;
  %\VignetteIndexEntry{&lt;Title&gt;}
  %\VignetteEngine{knitr::rmarkdown}
---</code></pre>
<p>The <code>&lt;Title&gt;</code> of the vignette should be meaningful.</p>
</div>
<div class="section level2">
<h2 id="markdown">Markdown<a class="anchor" aria-label="anchor" href="#markdown"></a>
</h2>
<div class="section level3">
<h3 id="default-options">Default Options<a class="anchor" aria-label="anchor" href="#default-options"></a>
</h3>
<p>If any chunks are used within the vignette, the following options should be set after the metadata to ensure that the chunks are rendered consistently across all vignettes.</p>
<pre><code>```{r setup, include=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#&gt;"
)
```</code></pre>
</div>
<div class="section level3">
<h3 id="format-sections">Format Sections<a class="anchor" aria-label="anchor" href="#format-sections"></a>
</h3>
<div class="section level4">
<h4 id="table-of-contents">Table of Contents<a class="anchor" aria-label="anchor" href="#table-of-contents"></a>
</h4>
<p>Headings must be title case and start from Heading 1:</p>
<pre><code># Heading 1
This is the description of my first section.

## Heading 1.1
This is the description of my first sub-section within my first section.

## Heading 1.2
This is the description of my second sub-section within my first section.
</code></pre>
<p>The first section gives a brief introduction of the vignette. The last sub-section of the introduction should describe the packages required to run the <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> functions. The <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> package should be described first.</p>
<pre><code># Introduction

This is the introduction of my vignette.

## Required Packages</code></pre>
<pre><code>```{r, warning=FALSE, message=FALSE}
library(admiral)
# &lt;all packages used in the vignette&gt;
```</code></pre>
<p>The <code>warning=FALSE</code> and <code>message=FALSE</code> options are there to prevent the usual messages:</p>
<p><span style="color: red;font-family: textmate, monospace; font-size = 10pt;">Attaching package: ‘xxxx’The following objects are masked from ‘package:yyyyy’ fun1, fun2</span></p>
</div>
<div class="section level4">
<h4 id="conventions">Conventions<a class="anchor" aria-label="anchor" href="#conventions"></a>
</h4>
<div class="section level5">
<h5 id="general-conventions">General Conventions<a class="anchor" aria-label="anchor" href="#general-conventions"></a>
</h5>
<ul>
<li><p>Any new vignette must be added to the <code>_pkgdown.yml</code> file in the relevant section.</p></li>
<li><p>Any variable name, dataset name, function, argument name must be quoted with backticks: e.g.</p></li>
</ul>
<pre><code>  The `date` parameter of the `derive_my_var()` function expects a date variable, e.g., `ADT`.</code></pre>
<ul>
<li><p>Functions must also end with <code>()</code>.</p></li>
<li><p>Variables and datasets name are expected to be uppercase.</p></li>
<li>
<p>All the codes must be described, executed and the output result displayed once the code is executed. Use:</p>
<pre><code>```{r}
#&lt;code&gt;
```</code></pre>
</li>
<li>
<p>Any output created must clearly show what the function has derived. It should at least show the variables/records used as input to the function and the derived variables/records. If a dataset must be displayed, it will be formatted using the <code><a href="../reference/dataset_vignette.html">dataset_vignette()</a></code> function so that it is displayed consistently across the vignettes.E.g.</p>
<ul>
<li>Description and execution of the code used to derive the variable/record</li>
</ul>
</li>
</ul>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">vs1</span> <span class="op">&lt;-</span> <span class="va">admiral_vs</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">derive_vars_dt</span><span class="op">(</span></span>
<span>    new_vars_prefix <span class="op">=</span> <span class="st">"A"</span>,</span>
<span>    dtc <span class="op">=</span> <span class="va">VSDTC</span>,</span>
<span>    date_imputation <span class="op">=</span> <span class="st">"first"</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<ul>
<li>Output dataset formatted using <code><a href="../reference/dataset_vignette.html">dataset_vignette()</a></code>…</li>
</ul>
<p>#TODO - Fix this</p>
<p>Note: The call to get the formatted dataset would be:</p>
<pre><code>  ```r
  dataset_vignette(
    vs1,
    display_vars = exprs(USUBJID, VSTESTCD, VISIT, VSDTC, ADT),
    filter = VSTESTCD == "WEIGHT"
  )
  ```
  </code></pre>
<p>Displaying many big datasets on a vignette, may require a long time to load the page and may cause messages from the browser that the page is not responsive. In this case the number of displayed observations should be restricted either by restricting the source datasets at the beginning of the vignette or in the call of <code><a href="../reference/dataset_vignette.html">dataset_vignette()</a></code> if only some calls are affected.</p>
</div>
<div class="section level5">
<h5 id="conventions-for-adam-workflow">Conventions for ADaM Workflow<a class="anchor" aria-label="anchor" href="#conventions-for-adam-workflow"></a>
</h5>
<p>For vignettes describing an ADaM workflow,</p>
<ul>
<li><p>the second section will summarize the programming workflow. The first sub-section within this workflow will always describe the data read to demonstrate the use of the <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> functions,</p></li>
<li><p>Each sub-section within the programming workflow should be tagged (e.g. [Step1] (#step)), so that the user can go on the relevant section from the programming workflow (in addition to the Table of contents). Don’t use a tag with a number but use a meaningful name (e.g. do not use <code>(#link1)</code>, but use <code>(#this_action)</code>)</p></li>
<li><p>the last section should link to a template script.</p></li>
</ul>
<pre><code># Programming Workflow

* [Read in Data](#readdata)
* [Derive/Impute End and Start Analysis Date/time and Relative Day](#datetime)
* ...
* [Assign `ASEQ`](#aseq)

## Read in Data {#readdata}
## Derive/Impute End and Start Analysis Date/time and Relative Day {#datetime}
## ...
## Assign `ASEQ` {#aseq}

# Another Section

# Example Script
ADaM | Sample Code
---- | --------------
ADxx | [ad_adxx.R](https://github.com/pharmaverse/admiral/blob/main/inst/templates/ad_adxx.R){target="_blank"}
</code></pre>
<ul>
<li>
<p><code>ADSL</code> variables</p>
<p>All <code>ADSL</code> variables which are required for any derivation are merged to the SDTM dataset before the first derivation. These <code>ADSL</code> variables have to be added to the by-variables for derivations which add observations. This ensures that the <code>ADSL</code> variables are populated <code>for</code> the new observations. A <code>adsl_vars</code> variable should be created at the beginning of the script and added to the <code>by_vars</code> parameter for derivations which add observations.</p>
<p><code>ADSL</code> variables which should be in the final dataset but are not required for any derivation are merged to the dataset after the last derivation.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ben Straub, Stefan Bundfuss, Thomas Neitmann, Samia Kabi, Pooja Kumari, Syed Mubasheer, Ross Farrugia, Sadchla Mascary, Zelos Zhu, Jeffrey Dickinson, Ania Golab, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
