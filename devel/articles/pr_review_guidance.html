<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="admiraldev">
<title>Pull Request Review Guidance • admiraldev</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Pull Request Review Guidance">
<meta property="og:description" content="admiraldev">
<meta property="og:image" content="https://pharmaverse.github.io/admiraldev/devel/devel/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">admiraldev</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../articles/admiraldev.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-developer-guides">Developer Guides</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-developer-guides">
    <a class="dropdown-item" href="../articles/development_process.html">Development Process</a>
    <a class="dropdown-item" href="../articles/programming_strategy.html">Programming Strategy</a>
    <a class="dropdown-item" href="../articles/writing_vignettes.html">Writing Vignettes</a>
    <a class="dropdown-item" href="../articles/unit_test_guidance.html">Unit Test Guidance</a>
    <a class="dropdown-item" href="../articles/git_usage.html">Guidance for git and GitHub Usage</a>
    <a class="dropdown-item" href="../articles/pr_review_guidance.html">Pull Request Review Guidance</a>
    <a class="dropdown-item" href="../articles/release_strategy.html">Release Strategy</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/pharmaverse/admiraldev" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">



<script src="pr_review_guidance_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Pull Request Review Guidance</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/pharmaverse/admiraldev/blob/main/vignettes/pr_review_guidance.Rmd" class="external-link"><code>vignettes/pr_review_guidance.Rmd</code></a></small>
      <div class="d-none name"><code>pr_review_guidance.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This document is intended to be guidance for creators and reviewers of pull requests (PRs) in the <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> package. PR authors will benefit from shorter review times by closely following the guidance provided here.</p>
<p>A pull request into the <code>devel</code> branch signifies that an issue that has been “addressed”. This issue might be a bug, a feature request or a documentation update. For transparency, we keep the issue open until the <code>devel</code> branch is merged into the <code>main</code> branch, which usually coincides with a release of <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> to CRAN. This ensures that repeat issues are not raised and if they are raised are quickly marked as duplicates and closed.</p>
<p>Closely following the below guidance will ensure that our all our “addressed” issues auto-close once we merge <code>devel</code> into <code>main</code>.</p>
</div>
<div class="section level2">
<h2 id="review-criteria">Review Criteria<a class="anchor" aria-label="anchor" href="#review-criteria"></a>
</h2>
<p>For a pull request to be merged into <code>devel</code> it needs to pass the automated <code>R CMD check</code>, <code>lintr</code>, and <code>task-list-completed</code> workflows on GitHub at a minimum. The first two checks can be run locally using the <code><a href="https://devtools.r-lib.org/reference/check.html" class="external-link">devtools::check()</a></code> and <code><a href="https://rdrr.io/pkg/lintr/man/lint_package.html" class="external-link">lintr::lint_package()</a></code> commands and are recommended to be done before pushing to GitHub. The <code>task-list-completed</code> workflow is exclusive to GitHub and will be discussed later. In addition, the PR creator and reviewer should make sure that</p>
<ul>
<li><p>the <a href="programming_strategy.html">Programming Strategy</a> and <a href="development_process.html">Development Process</a> are followed</p></li>
<li><p>the function is ADaM IG compliant</p></li>
<li><p>the function does what is intended for (as described in the header and corresponding issue)</p></li>
<li><p>the function header properly explains the intention of the function, the expected inputs (incl. permitted values of parameters) and the output produced; after reading the documentation the reader should be able to predict the output of the function without having to read the source code</p></li>
<li><p>the function has an accompanying set of unit tests; for derivations these unit test should have a code coverage of at least 90%; the whole package should have a coverage of &gt;= 80%</p></li>
<li><p>the implemented derivation is in the scope of <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a>, e.g. does not expect company specific input or hard-code company-specific rules</p></li>
<li><p>meaningful error or warning messages are issued if the input is invalid</p></li>
<li><p>documentation is created/updated by running <code><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">devtools::document()</a></code></p></li>
<li><p>functions which are supposed to be exported are listed in the <code>NAMESPACE</code> file; this requires an <code>@export</code> tag in the function header</p></li>
<li><p>examples print relevant source variables and newly created variables and/or records in their output</p></li>
<li><p>the <code>NEWS.md</code> file is updated with an entry that explains the new features or changes</p></li>
<li><p>the author of a function is listed in the <code>DESCRIPTION</code> file</p></li>
<li><p>all files affected by the implemented changes, e.g. vignettes and templates, are updated</p></li>
</ul>
</div>
<div class="section level2">
<h2 id="so-much-red-tape">So much Red Tape!<a class="anchor" aria-label="anchor" href="#so-much-red-tape"></a>
</h2>
<p>The <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> development team is aware and sympathetic to the great many checks, processes and documents needed to work through in order to do a compliant Pull Request. The <code>task-list-completed</code> GitHub workflow was created to help reduce this burden on contributors by providing a standardized checklist that compiles information from the Pull Request Review Guidance, <a href="programming_strategy.html">Programming Strategy</a> and <a href="development_process.html">Development Process</a> vignettes.</p>
<p>The next three sections give a high-level overview of what a contributor faces in opening a PR, and how a contributor interacts with the <code>task-list-completed</code> workflow in their PR.</p>
<div class="section level3">
<h3 id="open-a-pull-request">Open a Pull Request<a class="anchor" aria-label="anchor" href="#open-a-pull-request"></a>
</h3>
<p>When a contributor opens a PR a lengthy standard text will be inserted into the comment section. Please do not alter any of the automated text. You will need to manually add <code>Closes #&lt;insert_issue_number&gt;</code> into the title of the Pull Request. You can use the Edit button in the top right if you forget this step at the start of your Pull Request. Besides that you are free to add in additional textual information, screenshots, etc. at the bottom of the automated text if needed to clarify or contribute to the discussion around your PR.</p>
<p><img src="pr_review_checklist.png" width="120%"></p>
</div>
<div class="section level3">
<h3 id="create-a-pull-request">Create a Pull Request<a class="anchor" aria-label="anchor" href="#create-a-pull-request"></a>
</h3>
<p>After you click the green <code>Create pull request</code> button the automated text that was inserted will be turned into a checklist in your Pull Request. Each check box has been drawn from the previously mentioned vignettes and presented in the recommended sequence. These check boxes are meant to be a helpful aid in ensuring that you have created a compliant Pull Request.</p>
<p><img src="pr_review_checkbox.png" width="120%"></p>
</div>
<div class="section level3">
<h3 id="complete-the-pull-request-checklist">Complete the Pull Request checklist<a class="anchor" aria-label="anchor" href="#complete-the-pull-request-checklist"></a>
</h3>
<p>The check boxes are linked to the <code>task-list-completed</code> workflow. You need to check off each box in acknowledgment that you have done you due diligence in creating a compliant Pull Request. GitHub will refresh the Pull Request and trigger <code>task-list-completed</code> workflow that you have completed the task. The PR can not be merged into <code>devel</code> until the contributor has checked off each of the check box items.</p>
<p><img src="pr_review_actions.png" width="120%"></p>
<p>Please don’t hesitate to reach out to the <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> team on <a href="https://app.slack.com/client/T028PB489D3/C02M8KN8269" class="external-link">Slack</a> or through the <a href="https://github.com/pharmaverse/admiral/issues" class="external-link">GitHub Issues</a> tracker if you think this checklist needs to be amended or further clarity is needed on a check box item.</p>
</div>
</div>
<div class="section level2">
<h2 id="github-actionsworkflows">GitHub Actions/Workflows<a class="anchor" aria-label="anchor" href="#github-actionsworkflows"></a>
</h2>
<p>The <code>task-list-completed</code> workflow is one of the several workflows/actions used within <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a>. These workflows live in the <code>.github/workflows</code> folder and it is important to understand their use and how to remedy if the workflow fails. Workflows defined here are responsible for assuring high package quality standards without compromising performance, security, or reproducibility.</p>
<div class="section level3">
<h3 id="a-synopsis-of-admirals-workflows">A synopsis of admiral’s workflows<a class="anchor" aria-label="anchor" href="#a-synopsis-of-admirals-workflows"></a>
</h3>
<p>Most workflows have a <code>BEGIN boilerplate steps</code> and <code>END boilerplate steps</code> section within them which define some standard steps required for installing system dependencies, R version and R packages which serve as dependencies for the package.</p>
<p>The underlying mechanisms for installing R and Pandoc are defined in <code>r-lib/actions</code>, while the installation of system dependencies and R package dependencies is managed via the Staged Dependencies GitHub Action]. The latter is used in conjunction with the <code>staged_dependencies.yaml</code> file in order to install dependencies that are in the <em>same stage of development</em> as the current package.</p>
<p>Following the installation of system dependencies, R, and package dependencies, each workflow checks the integrity of a specific component of the admiral codebase.</p>
<div class="section level4">
<h4 id="check-templates-yml">
<code>check-templates.yml</code><a class="anchor" aria-label="anchor" href="#check-templates-yml"></a>
</h4>
<p>This workflow checks for issues within template scripts. For example, in the admiral package there are several template scripts with admiral-based functions showing how to build certain ADaM datasets. As we update the admiral functions, we want to make sure these template scripts execute appropriately. Functions in the template scripts that are deprecated or used inappropriately will cause this workflow to fail. Click on the details button on a failing action provides information on the where the template is failing.</p>
</div>
<div class="section level4">
<h4 id="code-coverage-yml">
<code>code-coverage.yml</code><a class="anchor" aria-label="anchor" href="#code-coverage-yml"></a>
</h4>
<p>This workflow measures code coverage for unit tests and reports the code coverage as a percentage of the <em>total number of lines covered by unit tests</em> vs. the <em>total number of lines in the codebase</em>.</p>
<p>The <a href="https://covr.r-lib.org" class="external-link">covr</a> R package is used to calculate the coverage.</p>
<p>Report summaries and badges for coverage are generated using a series of other GitHub Actions.</p>
</div>
<div class="section level4">
<h4 id="links-yml">
<code>links.yml</code><a class="anchor" aria-label="anchor" href="#links-yml"></a>
</h4>
<p>This workflow checks whether URLs embedded in code and documentation are valid. Invalid URLs results in workflow failures. This workflow uses <code>lychee</code> to detect broken links. Occasionally this check will detect false positives of urls that look like urls. To remedy, please add this false positive to the <code>.lycheeignore</code> file.</p>
</div>
<div class="section level4">
<h4 id="lintr-yml">
<code>lintr.yml</code><a class="anchor" aria-label="anchor" href="#lintr-yml"></a>
</h4>
<p>Static code analysis is performed by this workflow, which in turn uses the <a href="https://github.com/jimhester/lintr" class="external-link">lintr</a> R package. The <code>.lintr</code> configurations in the repository will be by this workflow.</p>
</div>
<div class="section level4">
<h4 id="man-pages-yml">
<code>man-pages.yml</code><a class="anchor" aria-label="anchor" href="#man-pages-yml"></a>
</h4>
<p>This workflow checks if the manual pages in the <code>man/</code> directory of the package are up-to-date with ROxygen comments in the code.</p>
<p>Workflow failures indicate that the manual pages are not up-to-date with ROxygen comments, and corrective actions are provided in the workflow log.</p>
</div>
<div class="section level4">
<h4 id="pkgdown-yml">
<code>pkgdown.yml</code><a class="anchor" aria-label="anchor" href="#pkgdown-yml"></a>
</h4>
<p>Documentation for the R package is generated via this workflow. This workflow uses the <a href="https://pkgdown.r-lib.org" class="external-link">pkgdown</a> framework to generate documentation in HTML, and the HTML pages are deployed to the <code>gh-pages</code> branch.</p>
<p>Moreover, an additional <code>Versions</code> dropdown is generated via the <code>multi-version-docs</code> GitHub Action, so that an end user can view multiple versions of the documentation for the package.</p>
</div>
<div class="section level4">
<h4 id="r-cmd-check-yml">
<code>r-cmd-check.yml</code><a class="anchor" aria-label="anchor" href="#r-cmd-check-yml"></a>
</h4>
<p>This workflow performs <code>R CMD check</code> for the package. Failed workflows are typically indicative of problems encountered during the check, and therefore an indication that the package does not meet quality standards.</p>
</div>
<div class="section level4">
<h4 id="r-pkg-validation-yml">
<code>r-pkg-validation.yml</code><a class="anchor" aria-label="anchor" href="#r-pkg-validation-yml"></a>
</h4>
<p>When a new release of the package is made, this workflow executes to create a validation report via <code>validation</code> action. The PDF report is then attached to the release within GitHub.</p>
</div>
<div class="section level4">
<h4 id="readme-render-yml">
<code>readme-render.yml</code><a class="anchor" aria-label="anchor" href="#readme-render-yml"></a>
</h4>
<p>If your codebase uses a <a href="../../README.Rmd"><code>README.Rmd</code> file</a>, then this workflow will automatically render a <code>README.md</code> and commit it to your branch.</p>
</div>
<div class="section level4">
<h4 id="spellcheck-yml">
<code>spellcheck.yml</code><a class="anchor" aria-label="anchor" href="#spellcheck-yml"></a>
</h4>
<p>Spellchecks are performed by this workflow, and the <a href="https://docs.ropensci.org/spelling/" class="external-link">spelling</a> R package is used to detect spelling mistakes. Failed workflows typically indicate misspelled words. In the <code>inst/WORDLIST</code> file, you can add words and or acronyms that you want the spell check to ignore, for example occds is not an English word but a common acronym used within Pharma. The workflow will flag this until a user adds it to the <code>inst/WORDLIST</code>.</p>
</div>
<div class="section level4">
<h4 id="style-yml">
<code>style.yml</code><a class="anchor" aria-label="anchor" href="#style-yml"></a>
</h4>
<p>Code style is enforced via the <code>styler</code> R package. Custom style configurations, if any, will be honored by this workflow. Failed workflows are indicative of unstyled code.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="common-r-cmd-check-issues">Common R CMD Check Issues<a class="anchor" aria-label="anchor" href="#common-r-cmd-check-issues"></a>
</h2>
<p><code>R CMD check</code> is a command line tool that checks R packages against a standard set of criteria. For a pull request to pass the check must not issue any notes, warnings or errors. Below is a list of common issues and how to resolve them.</p>
<div class="section level3">
<h3 id="check-fails-only-on-one-version">Check Fails Only on One Version<a class="anchor" aria-label="anchor" href="#check-fails-only-on-one-version"></a>
</h3>
<p>If the <code>R CMD check</code> workflow fails only on one or two R versions it can be helpful to reproduce the testing environment locally.</p>
<p>To reproduce a particular R version environment open the <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> project in the corresponding R version, comment the line <code>source("renv/activate.R")</code> in the <code>.Rprofile</code> file, restart the R session and then run the following commands in the R console.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>R_REMOTES_NO_ERRORS_FROM_WARNINGS <span class="op">=</span> <span class="st">"true"</span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="st">".library"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="st">".library"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">base_recommended_pkgs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html" class="external-link">installed.packages</a></span><span class="op">(</span>priority <span class="op">=</span> <span class="st">"high"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">pkg</span> <span class="kw">in</span> <span class="va">base_recommended_pkgs</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">.Library</span>, <span class="va">pkg</span><span class="op">)</span></span>
<span>  <span class="va">cmd</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sprintf.html" class="external-link">sprintf</a></span><span class="op">(</span><span class="st">"cp -r %s .library"</span>, <span class="va">path</span><span class="op">)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/system.html" class="external-link">system</a></span><span class="op">(</span><span class="va">cmd</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/assign.html" class="external-link">assign</a></span><span class="op">(</span><span class="st">".lib.loc"</span>, <span class="st">".library"</span>, envir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/environment.html" class="external-link">environment</a></span><span class="op">(</span><span class="va">.libPaths</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">r_version</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/numeric_version.html" class="external-link">getRversion</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^4.0"</span>, <span class="va">r_version</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="st">"https://cran.microsoft.com/snapshot/2021-03-31"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"^4.1"</span>, <span class="va">r_version</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="st">"https://cran.microsoft.com/snapshot/2022-03-10"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"release"</span>, <span class="va">r_version</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="st">"https://cran.microsoft.com/snapshot/2022-06-23"</span><span class="op">)</span></span>
<span><span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/options.html" class="external-link">options</a></span><span class="op">(</span>repos <span class="op">=</span> <span class="st">"https://cran.rstudio.com"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/ns-load.html" class="external-link">requireNamespace</a></span><span class="op">(</span><span class="st">"remotes"</span>, quietly <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"remotes"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_deps.html" class="external-link">install_deps</a></span><span class="op">(</span>dependencies <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"pharmaverse/admiral.test"</span>, ref <span class="op">=</span> <span class="st">"devel"</span><span class="op">)</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"pharmaverse/admiraldev"</span>, ref <span class="op">=</span> <span class="st">"devel"</span><span class="op">)</span></span>
<span><span class="fu">rcmdcheck</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rcmdcheck/man/rcmdcheck.html" class="external-link">rcmdcheck</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>This will ensure that the exact package versions we use in the workflow are installed into the hidden folder <code>.library</code>. That way your existing R packages are <em>not</em> overwritten.</p>
</div>
<div class="section level3">
<h3 id="package-dependencies">Package Dependencies<a class="anchor" aria-label="anchor" href="#package-dependencies"></a>
</h3>
<pre><code>&gt; checking package dependencies ... ERROR
  Namespace dependency not required: ‘pkg’</code></pre>
<p>Add <code>pkg</code> to the <code>Imports</code> or <code>Suggests</code> field in the <code>DESCRIPTION</code> file. In general, dependencies should be listed in the <code>Imports</code> field. However, if a package is only used inside vignettes or unit tests it should be listed in <code>Suggests</code> because all <a href="https://pharmaverse.github.io/admiral/" class="external-link">admiral</a> functions would work without these “soft” dependencies being installed.</p>
</div>
<div class="section level3">
<h3 id="global-variables">Global Variables<a class="anchor" aria-label="anchor" href="#global-variables"></a>
</h3>
<pre><code>❯ checking R code for possible problems ... NOTE
  function_xyz: no visible binding for global variable ‘some_var’</code></pre>
<p>Add <code>some_var</code> to the list of “global” variables in <code>R/globals.R</code>.</p>
</div>
<div class="section level3">
<h3 id="undocumented-function-parameter">Undocumented Function Parameter<a class="anchor" aria-label="anchor" href="#undocumented-function-parameter"></a>
</h3>
<pre><code>❯ checking Rd \usage sections ... WARNING
  Undocumented arguments in documentation object 'function_xyz'
    ‘some_param’</code></pre>
<p>Add an <code>@param some_param</code> section in the header of <code>function_xyz()</code> and run <code><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">devtools::document()</a></code> afterwards.</p>
</div>
<div class="section level3">
<h3 id="outdated-documentation">Outdated Documentation<a class="anchor" aria-label="anchor" href="#outdated-documentation"></a>
</h3>
<pre><code>❯ checking for code/documentation mismatches ... WARNING
  Codoc mismatches from documentation object 'function_xyz':
  ...
  Argument names in code not in docs:
    new_param_name
  Argument names in docs not in code:
    old_param_name
  Mismatches in argument names:
    Position: 6 Code: new_param_name Docs: old_param_name</code></pre>
<p>The name of a parameter has been changed in the function code but not yet in the header. Change <code>@param old_param_name</code> to <code>@param new_param_name</code> and run <code><a href="https://devtools.r-lib.org/reference/document.html" class="external-link">devtools::document()</a></code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ben Straub, Stefan Bundfuss, Thomas Neitmann, Samia Kabi, Pooja Kumari, Syed Mubasheer, Ross Farrugia, Sadchla Mascary, Zelos Zhu, Jeffrey Dickinson, Ania Golab, F. Hoffmann-La Roche AG, GlaxoSmithKline LLC.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
